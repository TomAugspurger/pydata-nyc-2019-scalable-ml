# config.yaml

jupyter:
  image:
    repository: "gcr.io/dask-demo-182016/dask-ml-pydata"
    tag: "a3606d"

scheduler:
  image:
    repository: "gcr.io/dask-demo-182016/dask-ml-pydata"
    tag: "a3606d"
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
            - key: cloud.google.com/gke-preemptible
              operator: DoesNotExist

worker:
  image:
    repository: "gcr.io/dask-demo-182016/dask-ml-pydata"
    tag: "a3606d"

  replicas: 8
  resources:
    limits:
      cpu: 1.8
      memory: 7.5G
    requests:
      cpu: 1.8
      memory: 7.5G

  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
            - key: cloud.google.com/gke-preemptible
              operator: In
              values:
                - "true"
  tolerations:
     - key: "preemptible"
       operator: "Equal"
       value: "true"
       effect: "NoSchedule" 
